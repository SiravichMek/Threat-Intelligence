# Input section for NGINX logs
input {
  file {
    path => "/home/mekky/Project/logs/nginx/access.log"  # Path to NGINX log file
    start_position => "beginning"
    sincedb_path => "/dev/null"  # Use persistent sincedb_path in production
    type => "nginx_log"  # Set a type to differentiate logs
  }

  # Input section for MySQL logs
  file {
    path => "logs/mysql/query.log"  # Path to MySQL log file
    start_position => "beginning"
    sincedb_path => "/dev/null"
    type => "mysql_log"  # Set a type to differentiate logs
  }

  # Input section for Firewall (Syslog) logs
  file {
    path => "/var/logs/syslog"  # Path to firewall/syslog log file
    start_position => "beginning"
    sincedb_path => "/dev/null"
    type => "firewall_log"  # Set a type to differentiate logs
  }
}

# Filter section (optional) to process or tag logs if necessary
filter {
  if [type] == "nginx_log" {
    # Example: Add a tag for NGINX logs (optional)
    mutate { add_tag => ["nginx"] }
  }

  if [type] == "mysql_log" {
    # Example: Add a tag for MySQL logs (optional)
    mutate { add_tag => ["mysql"] }
  }

  if [type] == "firewall_log" {
    # Example: Add a tag for firewall logs (optional)
    mutate { add_tag => ["firewall"] }
  }
}

# Output section to handle different types of logs
output {
  # Output for NGINX logs
  if [type] == "nginx_log" {

    tcp {
      host => "192.168.1.106"  # Destination host for NGINX logs
      port => 5044
      codec => "line"
    }

    stdout { codec => rubydebug }  # Debugging output for NGINX logs
  }

  # Output for MySQL logs
  if [type] == "mysql_log" {

    tcp {
      hosts => ["192.168.1.106"]  # Destination host for MySQL logs
      port => 5044
      codec => "json_lines"
    }

    stdout { codec => rubydebug }  # Debugging output for MySQL logs
  }

  # Output for Firewall logs
  if [type] == "firewall_log" {

    tcp {
      hosts => ["192.168.1.106"]  # Destination host for Firewall logs
      port => 5044
      codec => "json_lines"
    }

    stdout { codec => rubydebug }  # Debugging output for Firewall logs
  }
}
